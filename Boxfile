build:
  type: php
  version: 5.5
  stability: production
  before_exec:
    - bash bake.sh
  lib_dir: vendor
  reuse_libs: true

web1:
  name: code
  type: php
  version: 5.5
  stability: production
  # Only the bare minimum extensions
  php_extensions:
    - bz2
    - mysql
    - curl
    - zip
    - tar
  # Extend execution and input time a tiny bit
  php_max_execution_time: 60
  php_max_input_time: 60
  php_post_max_size: 1M
  # Increase input vars for permission forms
  php_max_input_vars: 10000
  php_date_timezone: US/east
  httpd_document_root: drupal
  zend_extensions:
    # Zend Opcache is currently outperforming other options available for PHP 5.5
    # - opcache
  network_dirs:
    storage1:
      - sites/all/default/files
      - sites/all/default/private
  env:
    - ENVIRONMENT: PAGODABOX

database1:
  name: data
  type: mysql
  topology: single

storage1:
  name: filestore
  type: nfs
